<!DOCTYPE html>
<meta charset="UTF-8">

<script src="_framework/blazor.webassembly.js" autostart="false"></script>

<script>
    window.getTime = () => {
        return new Date().toJSON();
    };
    window.onload = async function () {
        console.log(window.location);
        await Blazor.start();
        const msg = await DotNet.invokeMethodAsync("Blazor.WasmTests", "BuildMessage", "John");
        console.log(msg);
        
        const code = "PF.Toe == 11";
        const code2 = await DotNet.invokeMethodAsync("Blazor.WasmTests", "FixCondition", code);
        console.log(code2);
        
        await DotNet.invokeMethodAsync("Blazor.WasmTests", "LoadAssemblies", window.location.href);
        const code3 = "System.Console.";
        const len = code3.length;

        console.log(new Date());

        const completions = await DotNet.invokeMethodAsync("Blazor.WasmTests", "GetTabCompletion", code3, len);
        console.log(completions);
        
        console.log(new Date());
        
        const hover = await DotNet.invokeMethodAsync("Blazor.WasmTests", "GetHoverInfo", code3, len - 4);
        console.log(hover);

        console.log(new Date());

        const checkCode = await DotNet.invokeMethodAsync("Blazor.WasmTests", "CheckCode", code3);
        console.log(checkCode);

        console.log(new Date());
    };
</script>
